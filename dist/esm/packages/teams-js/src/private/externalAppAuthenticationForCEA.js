import{__awaiter as t}from"../../../../node_modules/tslib/tslib.es6.js";import{sendAndUnwrap as e}from"../internal/communication.js";import{ensureInitialized as n}from"../internal/internalAPIs.js";import{getApiVersionTag as i}from"../internal/telemetry.js";import{validateId as o}from"../internal/utils.js";import{FrameContexts as r,errorNotSupportedOnPlatform as a}from"../public/constants.js";import{runtime as s}from"../public/runtime.js";import{externalAppAuthentication as u}from"./externalAppAuthentication.js";const c="v2";var h;!function(h){function d(){return!(!n(s)||!s.supports.externalAppAuthenticationForCEA)}function p(t){if(t.type!==u.ActionExecuteInvokeRequestType){throw{errorCode:u.InvokeErrorCode.INTERNAL_ERROR,message:`Invalid action type ${t.type}. Action type must be "${u.ActionExecuteInvokeRequestType}"`}}}h.authenticateWithSSO=function(u,h,p){return t(this,void 0,void 0,(function*(){if(n(s,r.content),!d())throw a;o(h,new Error("conversation id is not valid."));const t=yield e(i(c,"externalAppAuthenticationForCEA.authenticateWithSSO"),"externalAppAuthenticationForCEA.authenticateWithSSO",u.toString(),h,p.claims,p.silent);if(t)throw t}))},h.authenticateWithOauth=function(u,h,p){return t(this,void 0,void 0,(function*(){if(n(s,r.content),!d())throw a;o(h,new Error("conversation id is not valid."));const t=yield e(i(c,"externalAppAuthenticationForCEA.authenticateWithOauth"),"externalAppAuthenticationForCEA.authenticateWithOauth",u.toString(),h,p.url.href,p.width,p.height,p.isExternal);if(t)throw t}))},h.authenticateAndResendRequest=function(h,l,f,v){return t(this,void 0,void 0,(function*(){if(n(s,r.content),!d())throw a;o(l,new Error("conversation id is not valid.")),p(v);const t=yield e(i(c,"externalAppAuthenticationForCEA.authenticateAndResendRequest"),"externalAppAuthenticationForCEA.authenticateAndResendRequest",h.toString(),l,v,f.url.href,f.width,f.height,f.isExternal);if(u.isActionExecuteResponse(t))return t;throw u.isInvokeError(t)?t:A}))},h.authenticateWithSSOAndResendRequest=function(h,l,f,v){return t(this,void 0,void 0,(function*(){if(n(s,r.content),!d())throw a;o(l,new Error("conversation id is not valid.")),p(v);const t=yield e(i(c,"externalAppAuthenticationForCEA.authenticateWithSSOAndResendRequest"),"externalAppAuthenticationForCEA.authenticateWithSSOAndResendRequest",h.toString(),l,v,f.claims,f.silent);if(u.isActionExecuteResponse(t))return t;throw u.isInvokeError(t)?t:A}))},h.isSupported=d;const A={errorCode:u.InvokeErrorCode.INTERNAL_ERROR,message:"No valid response received"}}(h||(h={}));export{h as externalAppAuthenticationForCEA};
