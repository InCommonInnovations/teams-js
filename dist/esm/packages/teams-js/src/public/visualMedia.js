import{__awaiter as i}from"../../../../node_modules/tslib/tslib.es6.js";import{sendAndHandleSdkError as e}from"../internal/communication.js";import{ensureInitialized as t}from"../internal/internalAPIs.js";import{getApiVersionTag as r}from"../internal/telemetry.js";import{FrameContexts as n,errorNotSupportedOnPlatform as s,errorInvalidCount as a,errorInvalidResponse as o}from"./constants.js";import{DevicePermission as u}from"./interfaces.js";import{runtime as m}from"./runtime.js";const c="v2";var l;!function(l){var p,d;let f;(p=l.CameraRestriction||(l.CameraRestriction={}))[p.FrontOrRear=1]="FrontOrRear",p[p.FrontOnly=2]="FrontOnly",p[p.RearOnly=3]="RearOnly",(d=l.Source||(l.Source={}))[d.Camera=1]="Camera",d[d.Gallery=2]="Gallery",l.hasPermission=function(){if(t(m,n.content,n.task),!f.isSupported())throw s;const i=u.Media;return e(r(c,"visualMedia.hasPermission"),"permissions.has",i)},l.requestPermission=function(){if(t(m,n.content,n.task),!f.isSupported())throw s;const i=u.Media;return e(r(c,"visualMedia.requestPermission"),"permissions.request",i)},function(u){function l(){return!!(t(m)&&m.supports.visualMedia&&m.supports.visualMedia.image&&m.supports.permissions)}function p(){if(!l())throw s}function d(i){if(!i||i.maxVisualMediaCount>10||i.maxVisualMediaCount<1)throw a}function f(i,e){if(e.length>i)throw o}u.captureImages=function(s){return i(this,void 0,void 0,(function*(){t(m,n.content,n.task),p(),d(s);const i=yield e(r(c,"visualMedia.image.captureImages"),"visualMedia.image.captureImages",s);return f(s.maxVisualMediaCount,i),i}))},u.retrieveImages=function(s){return i(this,void 0,void 0,(function*(){t(m,n.content,n.task),p(),d(s);const i=yield e(r(c,"visualMedia.image.retrieveImages"),"visualMedia.image.retrieveImages",s);return f(s.maxVisualMediaCount,i),i}))},u.isSupported=l}(f=l.image||(l.image={}))}(l||(l={}));export{l as visualMedia};
