import{sendAndHandleSdkError as t}from"../internal/communication.js";import{ensureInitialized as r}from"../internal/internalAPIs.js";import{deserializeCart as e,validateUuid as a,validateCartItems as n,serializeCartItems as s,validateCartStatus as o}from"../internal/marketplaceUtils.js";import{getApiVersionTag as i}from"../internal/telemetry.js";import{FrameContexts as m,errorNotSupportedOnPlatform as c}from"./constants.js";import{runtime as d}from"./runtime.js";const u="v2";var p;!function(p){var l,I;function C(){return!(!r(d)||!d.supports.marketplace)}p.cartVersion={majorVersion:1,minorVersion:1},(l=p.Intent||(p.Intent={})).TACAdminUser="TACAdminUser",l.TeamsAdminUser="TeamsAdminUser",l.TeamsEndUser="TeamsEndUser",(I=p.CartStatus||(p.CartStatus={})).Open="Open",I.Processing="Processing",I.Processed="Processed",I.Closed="Closed",I.Error="Error",p.getCart=function(){if(r(d,m.content,m.task),!C())throw c;return t(i(u,"marketplace.getCart"),"marketplace.getCart",p.cartVersion).then(e)},p.addOrUpdateCartItems=function(o){if(r(d,m.content,m.task),!C())throw c;if(!o)throw new Error("addOrUpdateCartItemsParams must be provided");return a(null==o?void 0:o.cartId),n(null==o?void 0:o.cartItems),t(i(u,"marketplace.addOrUpdateCartItems"),"marketplace.addOrUpdateCartItems",Object.assign(Object.assign({},o),{cartItems:s(o.cartItems),cartVersion:p.cartVersion})).then(e)},p.removeCartItems=function(n){if(r(d,m.content,m.task),!C())throw c;if(!n)throw new Error("removeCartItemsParams must be provided");if(a(null==n?void 0:n.cartId),!Array.isArray(null==n?void 0:n.cartItemIds)||0===(null==n?void 0:n.cartItemIds.length))throw new Error("cartItemIds must be a non-empty array");return t(i(u,"marketplace.removeCartItems"),"marketplace.removeCartItems",Object.assign(Object.assign({},n),{cartVersion:p.cartVersion})).then(e)},p.updateCartStatus=function(n){if(r(d,m.content,m.task),!C())throw c;if(!n)throw new Error("updateCartStatusParams must be provided");return a(null==n?void 0:n.cartId),o(null==n?void 0:n.cartStatus),t(i(u,"marketplace.updateCartStatus"),"marketplace.updateCartStatus",Object.assign(Object.assign({},n),{cartVersion:p.cartVersion})).then(e)},p.isSupported=C}(p||(p={}));export{p as marketplace};
