import{__awaiter as t}from"../../../../node_modules/tslib/tslib.es6.js";import{sendAndHandleSdkError as r}from"../internal/communication.js";import{GlobalVars as e}from"../internal/globalVars.js";import{ensureInitialized as o}from"../internal/internalAPIs.js";import{getApiVersionTag as i}from"../internal/telemetry.js";import{getBase64StringFromBlob as n,base64ToBlob as s}from"../internal/utils.js";import{FrameContexts as a,errorNotSupportedOnPlatform as p}from"./constants.js";import{ClipboardSupportedMimeType as l}from"./interfaces.js";import{runtime as m}from"./runtime.js";var c;!function(c){function d(){return e.isFramelessWindow?!(!o(m)||!m.supports.clipboard):!!(o(m)&&navigator&&navigator.clipboard&&m.supports.clipboard)}c.write=function(e){return t(this,void 0,void 0,(function*(){if(o(m,a.content,a.meetingStage,a.task,a.settings,a.stage,a.sidePanel),!d())throw p;if(!e.type||!Object.values(l).includes(e.type))throw new Error(`Blob type ${e.type} is not supported. Supported blob types are ${Object.values(l)}`);const t=yield n(e),s={mimeType:e.type,content:t};return r(i("v2","clipboard.write"),"clipboard.writeToClipboard",s)}))},c.read=function(){return t(this,void 0,void 0,(function*(){o(m,a.content,a.meetingStage,a.task,a.settings,a.stage,a.sidePanel);const t=i("v2","clipboard.read");if(!d())throw p;const e=yield r(t,"clipboard.readFromClipboard");if("string"==typeof e){const t=JSON.parse(e);return s(t.mimeType,t.content)}return e}))},c.isSupported=d}(c||(c={}));export{c as clipboard};
